<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link
  <link rel="stylesheet" type="text/css" href="twiddler.css">
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
        
        $upTop = $('<h1>Twiddler</h1>').appendTo($body);
        $upTop.addClass('title');
        //iterate tweet object: to look at "Create At" key

        $('<div></div>').appendTo($body);
        $('div').addClass('buttons');

        var $button1 = $('<button></button>');
        $button1.text('New Tweets');
        $button1.appendTo('.buttons');
        $button1.attr('id', 'btn1');

        var $button2 = $('<button></button>');
        $button2.text('Reload Tweets');
        $button2.appendTo('.buttons');
        $button2.attr('id', 'btn2');
        $('button').css("margin","20px");

        $('#btn2').on('click', function() {
          $('.tweet').show();
        });


        $('#btn1').on('click', function() {
          var index = 10;
          while(index >= 0){
            var newTweet = streams.home[index];
            var $newTweet = $('<div></div>');
            var $tweetUsername = $('<span></span>');
            var $tweetTime = $('<span></span>');
            var $tweetMsg = $('<p></p>');

            $tweetUsername.text('@' + newTweet.user);
            $tweetTime.text(' ' + newTweet.created_at);
            $tweetMsg.text(newTweet.message);

            $newTweet.insertAfter('.buttons');
            $newTweet.addClass('tweet');
            $tweetUsername.appendTo($newTweet);
            $tweetUsername.addClass('username');
            $tweetTime.appendTo($newTweet);
            $tweetTime.addClass('tweetTime');
            $tweetMsg.appendTo($newTweet);
            $tweetMsg.addClass('tweetMsg');

            index -= 1;

          }

      });


        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          var $tweetUsername = $('<span></span>');
          var $tweetTime = $('<span></span>');
          var $tweetMsg = $('<p></p>');

          $tweetUsername.text('@' + tweet.user);
          $tweetTime.text('    ' + tweet.created_at);
          $tweetMsg.text(tweet.message);
          
          $tweet.appendTo($body);
          $tweet.addClass('tweet');
          $tweetUsername.appendTo($tweet);
          $tweetUsername.addClass('username');
          $tweetTime.appendTo($tweet);
          $tweetTime.addClass('tweetTime');
          $tweetMsg.appendTo($tweet);
          $tweetMsg.addClass('tweetMsg');

          index -= 1;
        }


      


          $(document).on('click', '.username', function() {

            var currentName = $(this).text();
            $('.tweet').each(function( index ) {
              if ( currentName !== $(this).find('span.username').text()) {
                $(this).hide();
              }  
            });
          });

    


        



      });

    </script>
  </body>
</html>
